(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
"use strict";

var SmoothScroll = require("../vendors/SmoothScroll/SmoothScroll.min");
var Waybetter = require("../vendors/Waybetter/waybetter.min");
var $http = require("../vendors/Http/http");

(function () {

	var htmlClass = document.documentElement.classList,
	    navEnabled = false,
	    defaults = {
		collapsibleSelector: ".collapsible",
		externalLinks: true,
		hamburger: "#hamburger",

		jumpLinks: true,
		navOpenClass: "nav-enabled",
		retinaImage: ".retina-image",
		scrollClass: "minimal",
		scrollIgnoreMQ: '(min-width:1025px)',
		scrollOffset: document.querySelector("header"),
		scrollOnLoad: true,
		scrollThreshold: 70,

		waybetter: true

	};

	var Framework = function Framework(opts) {
		var settings = Object.assign(defaults, opts);

		function _init() {
			if (settings.retinaImage) {
				_processRetinaImages();
			}

			if (settings.externalLinks === true) {
				_processExternalLinks();
			}

			if (settings.hamburger) {
				navEnabled = false;
				_watchHamburger();
			}

			if (settings.scrollThreshold) {
				_watchHeader();
			}

			if (settings.scrollOnLoad) {
				_scrollOnLoad();
			}

			if (settings.jumpLinks) {
				_watchJumpLinks();
			}

			if (settings.waybetter) {
				_processWaybetter();
			}

			if (settings.collapsibleSelector) {
				_processCollapsible();
			}
		}

		function _processRetinaImages() {
			[].slice.apply(document.querySelectorAll(settings.retinaImage)).forEach(function (img) {
				if (img.tagName.toLowerCase() === "img") {
					_cutRetinaInHalf(img);
				} else {
					[].slice.apply(img.querySelector("img")).forEeach(function (img) {
						if (img.complete) {
							_cutRetinaInHalf(img);
						} else {
							img.addEventListner("load", function () {
								return _cutRetinaInHalf(img);
							});
						}
					});
				}
			});
		}

		function _watchHamburger() {
			var hamburger = document.querySelector(settings.hamburger);

			if (hamburger) {
				hamburger.addEventListener("click", function (evt) {
					evt.preventDefault();
					if (navEnabled === false) {
						_openNav();
					} else {
						_closeNav();
					}
				});
			}
		}

		function _watchHeader() {
			var header = document.querySelector("header"),
			    mql = window.matchMedia(settings.scrollIgnoreMQ),
			    mqlListen = function mqlListen() {
				if (mql.matches === true) {
					if (window.pageYOffset < settings.scrollThreshold) {
						htmlClass.remove(settings.scrollClass);
					} else if (header.getBoundingClientRect().top <= 0) {
						htmlClass.add(settings.scrollClass);
					}
				} else {
					htmlClass.add(settings.scrollClass);
				}
			};

			mqlListen();
			window.addEventListener("scroll", mqlListen);
			window.addEventListener("resize", mqlListen);
		}

		function _scrollOnLoad() {
			if (window.location.hash && document.querySelector(window.location.hash)) {
				new SmoothScroll(window.location.hash, { offset: settings.scrollOffset });
			}
		}

		function _watchJumpLinks() {
			document.addEventListener("click", function (evt) {
				var t = evt.target;
				if (t.hash && document.querySelector(t.hash)) {
					evt.preventDefault();
					history.pushState(null, null, t.href);
					_closeNav();
					new SmoothScroll(t.hash, { offset: settings.scrollOffset });
				}
			});
		}

		function _processWaybetter() {
			Array.from(document.querySelectorAll("[waybetter-watch]")).forEach(function (el) {
				return new Waybetter(el);
			});
		}

		function _processExternalLinks() {
			document.addEventListener("click", function (e) {
				var a = _getTag(e.target) === "a" ? e.target : _getTag(e.target.parentNode) === "a" ? e.target.parentNode : null;
				if (a && a.host !== window.location.host && !a.matches(".exclude")) {
					e.preventDefault();
					var w = window.open(a.href);
					w.opener = null;
				}
			});
		}

		function _processCollapsible() {
			Array.from(document.querySelectorAll(settings.collapsibleSelector)).forEach(function (collapsible) {
				var items = Array.from(collapsible.children);
				items.forEach(function (item) {
					var trigger = item.children[0],
					    content = item.children[1];

					trigger.addEventListener("click", function () {
						var active = items.find(function (i) {
							return i.classList.contains("active");
						});
						if (active) {
							active.classList.remove("active");
							active.children[1].style.height = 0;
						}

						if (active !== trigger.parentNode) {
							var height = Array.from(trigger.nextElementSibling.children).reduce(function (a, b) {
								var style = window.getComputedStyle(b);
								return a + parseFloat(style.height) + parseFloat(style.paddingTop) + parseFloat(style.paddingBottom) + parseFloat(style.marginTop) + parseFloat(style.marginBottom);
							}, 0);

							trigger.parentNode.classList.add("active");
							trigger.nextElementSibling.style.height = height + 'px';
						}
					});
				});
			});
		}

		function _cutRetinaInHalf(img) {
			img.width /= 2;
		}

		function _closeNav(immediate) {
			navEnabled = false;
			if (immediate) {
				htmlClass.add("immediate");
			}
			htmlClass.remove(settings.navOpenClass);
		}

		function _openNav() {
			navEnabled = true;
			htmlClass.add(settings.navOpenClass);
		}

		function _getTag(el) {
			return el && el.tagName && el.tagName.toLowerCase();
		}

		_init();
	};

	Framework.$http = $http;
	Framework.SmoothScroll = SmoothScroll;
	Framework.Waybetter = Waybetter;

	window.Framework = Framework;
})();

(function (window) {
	if (typeof window.drupalSettings !== "undefined" && typeof window.drupalSettings.toolbar !== "undefined") {
		var tabs = document.querySelector('ul.button-group');
		tabs.style.margin = 0;
		[].slice.apply(tabs.children).forEach(function (li) {
			li.classList.add("admin-menu-tab");
		});
		document.querySelector('.toolbar-menu-administration').appendChild(tabs);
	}
})(window);

},{"../vendors/Http/http":2,"../vendors/SmoothScroll/SmoothScroll.min":3,"../vendors/Waybetter/waybetter.min":4}],2:[function(require,module,exports){
/*jshint esnext: true */

let $http = url => {
	let ajax = (method, options = {}) => {
		return new Promise((resolve, reject) => {
			let client = new XMLHttpRequest(), params = [];

			client.addEventListener("load", () => (client.status >= 200 && client.status < 300) ? resolve(client) : reject(client));

			if ( options.data ) {
				for (var key in options.data) { 
					if(options.data.hasOwnProperty(key)) { 
						params.push(encodeURI(key) + "=" + encodeURI(options.data[key])); 
					} 
				}
				
				url += "?" + params.join("&");
			}

			client.addEventListener("error", () => reject(client));
			
			client.open(method, url);

			if ( options.data ) {
				client.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
			}
			
			if ( options.headers ) {
				options.headers.forEach(h => {
					let k = Object.keys(h)[0];
					client.setRequestHeader(k, h[k]);
				});
			}

			client.send();			
		});	
	},
	methods = {};
	
	["get", "post", "put", "delete"].forEach(m => methods[m] = (o => ajax(m,o)));

	return methods;
};

module.exports = $http;
},{}],3:[function(require,module,exports){
"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,e){for(var s=0;s<e.length;s++){var i=e[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,s,i){return s&&t(e.prototype,s),i&&t(e,i),e}}(),SmoothScroll=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,t),this.target=null,this.targetOrig=e,this.startPos=null,this.start=null,this.settings=Object.assign({},this._defaults(),s),this._start()}return _createClass(t,[{key:"_scroll",value:function t(){var e=this,s=(Date.now()-this.start)/this.settings.speed,i=this.startPos+(this.target-this.startPos)*s;s<1?(window.scrollTo(window.scrollX,i),window.requestAnimationFrame(function(){return e._scroll()})):(window.scrollTo(window.scrollX,this.target),this.settings.callback&&this.settings.callback.call(this.target))}},{key:"_start",value:function t(){this.startPos=window.pageYOffset;var e=isNaN(this.settings.offset)?this._getElement(this.settings.offset).clientHeight:Number(this.settings.offset),s=isNaN(this.targetOrig)?this._getElementPosition(this.targetOrig)-e:Math.max(0,Number(this.targetOrig));this.target=s<0?window.pageYOffset+s:s,this.start=Date.now(),this._scroll()}},{key:"_getElement",value:function t(e){return e instanceof HTMLElement?e:document.querySelector(e)}},{key:"_getElementPosition",value:function t(e){return Math.floor(this._getElement(e).getBoundingClientRect().top+this.startPos)}},{key:"_defaults",value:function t(){return{speed:300,offset:null,callback:null}}}]),t}();module.exports=SmoothScroll;
},{}],4:[function(require,module,exports){
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),Waybetter=function(){function e(t){var r=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;_classCallCheck(this,e),this.els=Array.isArray(t)?t:[t],this.threshold=n,this.viewport=window,["scroll","resize"].forEach(function(e){return r.viewport.addEventListener(e,function(){return r._process()})})}return _createClass(e,[{key:"refresh",value:function e(){this._process()}},{key:"_createEvent",value:function e(t){var r=void 0;try{r=new Event("waybetter."+t+"view",{bubbles:!0})}catch(e){r=document.createEvent("Event"),r.initEvent("waybetter."+t+"view",!0,!0)}return r}},{key:"_isInView",value:function e(t){var r=t.getBoundingClientRect();return r.bottom+this.threshold>=0&&r.top+this.threshold<=this.viewport.innerHeight&&r.right+this.threshold>=0&&r.left+this.threshold<=this.viewport.innerWidth}},{key:"_process",value:function e(){var t=this;this.els.forEach(function(e){var r=t._isInView(e);(r&&!e.inview||!r&&e.inview)&&(e.inview=r,r?e.setAttribute("waybetter",""):e.removeAttribute("waybetter"),requestAnimationFrame(function(){return e.dispatchEvent(t._createEvent(r?"in":"out"))}))})}}]),e}();module.exports=Waybetter;
},{}]},{},[1]);
